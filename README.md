# Роль Ansible: vector

Эта роль разворачивает и настраивает Vector — инструмент для сбора и обработки логов — на хостах с Ubuntu. Она включает загрузку пакета, установку, настройку конфигурации и запуск сервиса.

## Назначение

Роль автоматизирует установку и настройку Vector, включая:
- Загрузку и установку пакета Vector.
- Создание конфигурационной директории.
- Развёртывание конфигурации из шаблона.
- Запуск сервиса Vector.

## Задачи

- Загружает `.deb`-пакет Vector с официального репозитория.
- Устанавливает Vector из загруженного пакета.
- Создаёт директорию `/etc/vector` с правами `0755`.
- Разворачивает конфигурационный файл из шаблона `vector.yml.j2`.
- Запускает и включает сервис Vector.

## Обработчики

Обработчики в текущей версии отсутствуют.

## Переменные

Переменные определены в `defaults/main.yml`:

| Переменная       | Описание                    | Значение по умолчанию |
|------------------|-----------------------------|----------------------|
| `vector_version` | Версия Vector для установки | `0.36.0`             |

## Шаблоны

- `vector.yml.j2`: Шаблон конфигурационного файла Vector, размещён в `templates/`.

## Зависимости

- **Система**: Ubuntu (протестировано на 20.04/22.04).
- **Интернет**: Требуется доступ к репозиторию Vector (`https://apt.vector.dev`).
- **Права**: Роль выполняется с `become: true` (root-права).

## Использование

Роль применяется через плейбук. Пример плейбука:

```yaml
---
- name: Deploy Vector Infrastructure
  hosts: vector_node
  become: true
  roles:
    - vector